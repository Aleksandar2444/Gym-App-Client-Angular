<section fxFlex fxLayout="column" fxLayoutGap="10px">
	<div class="profile__container" fxFlex fxLayout="column" fxLayoutGap="10px">
		<div class="profile__info" fxFlex fxLayoutGap="10px">
			<div class="img__wrapper">
				<img src="/assets/images/profileimg.jpg" alt="profile-img" />
			</div>
			<div
				*ngIf="user"
				class="name__wrapper"
				fxFlex
				fxLayoutAlign="flex-start flex-end"
			>
				<div>
					<p>{{ user.firstName }} {{ user.lastName }}</p>
					<p *ngIf="userDataObj">{{ userDataObj.gymNickname }}</p>
				</div>
			</div>
		</div>
		<div class="profile__info2">
			<div class="button1__wrapper">
				<button (click)="onEdit()">Edit profile</button>
			</div>
			<div class="info2__container">
				<div class="info2__stats">
					<p>43</p>
					<p>photos</p>
				</div>
				<div class="info2__stats">
					<p>750</p>
					<p>followers</p>
				</div>
				<div class="info2__stats">
					<p>430</p>
					<p>following</p>
				</div>
			</div>
		</div>
	</div>
	<div class="about__container">
		<div class="about__container__info" *ngIf="userDataObj">
			<div class="country__container">
				<p>{{ userDataObj.country }}</p>
				,
				<p>{{ userDataObj.city }}</p>
			</div>
			<div class="about__container__info__text">
				<p>
					{{ userDataObj.about }}
					<!-- Aspire to be better each day, learn new things, solve
					problems in an efficient way, share knowledge about things
					you love, listen to some good music along and be a great
					team player. -->
				</p>
			</div>
		</div>
	</div>
	<div class="stepper__container">
		<mat-tab-group dynamicHeight>
			<!-- My Posts -->
			<mat-tab label="Posts">
				<!-- Create post -->
				<div class="create__post">
					<div class="img__wrapper">
						<img
							src="/assets/images/profileimg.jpg"
							alt="profile-img"
						/>
					</div>
					<div class="post__bar" routerLink="/posts/create">
						<p>Create a post</p>
					</div>
				</div>
				<!-- User posts -->
				<section class="container">
					<div class="container-heading" *ngIf="post">
						<h2 *ngIf="user">
							{{
								user.firstName + " " + user.lastName + " posts"
							}}
						</h2>
					</div>
					<div class="posts-container">
						<div
							class="post"
							*ngFor="let post of postArray"
							(click)="onPostSelect(post._id)"
						>
							<div class="post-heading">
								<h3>{{ post.title }}</h3>
								<span class="likes-display">
									<span class="like">
										<i>üëç</i>
										{{ post.likes }}
									</span>
								</span>
							</div>
							<div class="post-body">
								{{ post.body }}
							</div>
							<div class="post-footer">
								<span>
									<i class="fa fa-user-circle"></i>
									{{ post.author.firstName }}
									{{ post.author.lastName }} on
									<span>{{ post.createdAt | date }}</span>
									|
									<span>{{
										post.createdAt | date : "shortTime"
									}}</span>
								</span>
								<div class="comments">
									<ng-container>
										<span
											(click)="onPostEdit($event, post)"
											class="edit-link"
											>Edit
											<i
												class="fa-solid fa-pen-to-square"
											></i
										></span>
										<span
											class="delete-link"
											(click)="onPostDelete($event, post)"
										>
											Delete
											<i
												class="fa-solid fa-trash-can"
											></i>
										</span>
									</ng-container>
									<span
										>Comments:
										{{ post.comments.length }}</span
									>
								</div>
							</div>
						</div>
					</div>
				</section>
			</mat-tab>
			<!-- Photos -->
			<mat-tab label="Photos">
				<div class="example-large-box mat-elevation-z4">
					<img src="/assets/images/gym2.jpg" alt="gym-jpg" />
				</div>
				<div class="example-large-box mat-elevation-z4">
					<img src="/assets/images/gym3.jpg" alt="gym-jpg" />
				</div>
				<div class="example-large-box mat-elevation-z4">
					<img src="/assets/images/gym4.webp" alt="gym-jpg" />
				</div>
				<div class="example-large-box mat-elevation-z4">
					<img src="/assets/images/gym5.avif" alt="gym-jpg" />
				</div>
			</mat-tab>
			<!-- Videos -->
			<mat-tab label="Videos">
				<div class="example-large-box mat-elevation-z4">Video 1</div>
				<div class="example-large-box mat-elevation-z4">Video 2</div>
				<div class="example-large-box mat-elevation-z4">Video 3</div>
				<div class="example-large-box mat-elevation-z4">Video 4</div>
			</mat-tab>
		</mat-tab-group>
	</div>
</section>

<!-- ngx-smart-modal -->
<ngx-smart-modal
	#myModal
	identifier="myModal"
	[closable]="false"
	[dismissable]="false"
	[escapable]="false"
>
	<div class="container">
		<div *ngIf="myModal.hasData()">
			<pre>{{ myModal.getData().prop1 }}</pre>
		</div>

		<form
			class="form-container"
			[formGroup]="userProfileForm"
			(ngSubmit)="onFormSubmit()"
		>
			<div *ngIf="user" class="name__wrapper_ngx">
				<p>{{ user.firstName }} {{ user.lastName }}</p>
			</div>

			<div class="form-group">
				<mat-form-field>
					<label for="gymNickname">Gym nick-name</label>
					<input
						type="text"
						class="form-control"
						matInput
						id="gymNickname"
						placeholder="enter gym nick-name"
						formControlName="gymNickname"
					/>
				</mat-form-field>
				<mat-error *ngIf="userProfileForm.controls.gymNickname.invalid"
					>Invalid gym nick-name
				</mat-error>
			</div>
			<div class="form-group fg2">
				<mat-form-field>
					<mat-select placeholder="Country" formControlName="country">
						<mat-option
							*ngFor="let country of dummyDataCountries"
							[value]="country.viewValue"
						>
							{{ country.viewValue }}
						</mat-option>
					</mat-select>
				</mat-form-field>
			</div>
			<div class="form-group">
				<mat-form-field>
					<label for="city">City</label>
					<input
						type="text"
						class="form-control"
						matInput
						id="city"
						placeholder="enter city"
						formControlName="city"
					/>
				</mat-form-field>
				<mat-error *ngIf="userProfileForm.controls.city.invalid"
					>Invalid city name
				</mat-error>
			</div>
			<div class="form-group">
				<label for="about">About</label>
				<textarea
					placeholder="enter post about"
					id="about"
					rows="5"
					class="form-control"
					formControlName="about"
				></textarea>
			</div>
			<div class="modal-footer">
				<button
					type="button"
					(click)="closeModal('myModal')"
					class="btn btn-secondary"
					data-dismiss="modal"
				>
					Close
				</button>
				<button
					type="submit"
					(click)="addData()"
					class="btn btn-primary"
					[disabled]="userProfileForm.invalid"
				>
					Update
				</button>
			</div>
		</form>
	</div>
</ngx-smart-modal>
<!-- end of ngx-smart-modal -->
